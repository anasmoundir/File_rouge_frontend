<div class="container mx-auto px-4">
  <h2>Subcategories</h2>

  <form [formGroup]="newSubcategoryForm" (ngSubmit)="createSubcategory()" class="subcategory-form mb-4">
    <div class="form-group flex items-center mb-2">
      <label for="subcategoryName" class="form-label mr-2">Subcategory Name:</label>
      <input type="text" class="form-control flex-grow mr-2" id="subcategoryName" placeholder="Enter subcategory name"
             formControlName="name" required>
      <select class="form-control w-24 mr-2" formControlName="categoryId">
        <option *ngFor="let category of categories$ | async" [value]="category.id">
          {{ category.name }}
        </option>
      </select>
      <button type="submit" class="btn btn-primary rounded-md bg-blue-500 hover:bg-blue-700 text-white px-3 py-1 focus:outline-none">
        Add Subcategory
      </button>
    </div>
  </form>

  <ul class="subcategory-list list-group">
    <li *ngFor="let subcategory of subcategories" class="list-group-item d-flex justify-content-between align-items-center">
      <span>{{ subcategory.name }}</span>
      <div class="d-flex">
        <button class="btn btn-primary rounded-md bg-blue-500 hover:bg-blue-700 text-white px-3 py-1 focus:outline-none mr-2"
                (click)="editSubcategory(subcategory)">Edit</button>
        <button class="btn btn-danger rounded-md bg-red-500 hover:bg-red-700 text-white px-3 py-1 focus:outline-none"
                (click)="deleteSubcategory(subcategory.id)">Delete</button>
      </div>
    </li>
  </ul>

  <ng-template #editSubcategoryForm>
    <div class="edit-form flex items-center mb-2">
      <label for="editSubcategoryName" class="form-label mr-2">Subcategory Name:</label>
      <input type="text" class="form-control flex-grow mr-2" id="editSubcategoryName" [(ngModel)]="selectedSubcategory.name">
      <button class="btn btn-primary rounded-md bg-blue-500 hover:bg-blue-700 text-white px-3 py-1 focus:outline-none mr-2"
              (click)="updateSubcategory(selectedSubcategory)">Save</button>
      <button class="btn btn-secondary rounded-md bg-gray-500 hover:bg-gray-700 text-white px-3 py-1 focus:outline-none"
              (click)="cancelEdit()">Cancel</button>
    </div>
  </ng-template>
</div>
